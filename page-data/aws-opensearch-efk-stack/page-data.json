{"componentChunkName":"component---src-templates-post-template-jsx","path":"/aws-opensearch-efk-stack","result":{"data":{"markdownRemark":{"html":"<h2 id=\"overview\" style=\"position:relative;\"><a href=\"#overview\" aria-label=\"overview permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overview</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 104.84848484848483%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAACRklEQVQ4y4VU227TQBDNnyLxDQjxyE8gfoAvAAQPCAkBAqRyKdAGGpLm0jhOYsf2eu9e74azu0qa0KQcJdvxZM7MmZ1xO+ubcP7gtZn2eWtaC0fFXUa9Ya0OiIGdA1zr2RdfyeMH55Rw2N8//3j38QsMY8xoNOr1ej7Muc6GYPHZTWG0zdLaBRXSWeJM9NuAo5W3aJ1e34rOOiQX3Z/ysg/LtoDvLpvJDy9mtnVB4TFy0FC+fll9eo8Y0zSmgUJ38a18dP/MNPZW8nE05r+yY2J8Q/54H156mMr20R2qvlcZcU3T2Nj3JkU0MKQD5JrrtyeJlCjSgolq7SEopXYfo6gOE/q0VxjT4qqEEJxzCQippMLV+YEFJuMcpwwAE0L8kkQ9sEAUUtP8avnq3vLZ3eXZc936XxDKGVXark6fLJ7eWb55SMrMhIY82ToPJcV0VVVcLJLL6fB3uVqqsMNaq6qmCaGM5JNBN0snlNaeFcmbymJVE6pkkqT9wXBVFPEF8JoZKzirSP2nP5jNF5Syf8noNo5kPk/H43GxQwZgUEpHo+FiOUeu0POGjPdCK1UxMclIoxWcuJjIwYkZXGVQhexYP4My1xcWWnZS8FlWdic5KujGq4pk1Kc1OZ/k87xEa4iEB0Pdu+04Ydi/ZmSQFnVVorhf0gAYROiTQQ4/ISTuz1a2xZNrjUz7jHGkhj9yTDh1PmV5KhT2wVzPGREmwO+AECxLIDtuQtwq/1c3oljQMvObEPyAJ7t9xPfEuhsIrW398Z/JX3LAwqYwhYOTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"overview\"\n        title=\"overview\"\n        src=\"/static/2d983d9e06505f557c177d40aa79db00/7c811/overview.png\"\n        srcset=\"/static/2d983d9e06505f557c177d40aa79db00/103f2/overview.png 165w,\n/static/2d983d9e06505f557c177d40aa79db00/748ba/overview.png 330w,\n/static/2d983d9e06505f557c177d40aa79db00/7c811/overview.png 660w,\n/static/2d983d9e06505f557c177d40aa79db00/d28e0/overview.png 990w,\n/static/2d983d9e06505f557c177d40aa79db00/f6c2e/overview.png 1264w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p><code class=\"language-text\">Kubernetes</code>는 생성된 <code class=\"language-text\">Pod</code>들에 대하여 <code class=\"language-text\">Stateless</code>하게 관리되어야하는 것이 기본 관리 원칙이다.</p>\n<p>그렇기에 <code class=\"language-text\">STDOUT</code>/<code class=\"language-text\">STDERR</code>등 <code class=\"language-text\">SYSOUT</code>의 형태로 쌓이는 로그들을 노드내에 저장하는 방식이 아닌 중앙 집중식 로깅 시스템을 구축해야 한다.</p>\n<p><code class=\"language-text\">Pod</code>로부터 수신된 로그를 <code class=\"language-text\">Fluent-bit</code>를 통해 <code class=\"language-text\">AWS Kinesis</code>로 전송하고, 수신된 로그 데이터를 <code class=\"language-text\">AWS OpenSearch</code>의 <code class=\"language-text\">ElasticSearch</code>가 받게 되고 <code class=\"language-text\">Kibana</code>를 통해 시각화하게 된다.</p>\n<h2 id=\"what-is-efk-stack\" style=\"position:relative;\"><a href=\"#what-is-efk-stack\" aria-label=\"what is efk stack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What Is EFK Stack?</h2>\n<h3 id=\"elf-stack\" style=\"position:relative;\"><a href=\"#elf-stack\" aria-label=\"elf stack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ELF Stack</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.06060606060606%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUElEQVQ4y3VSTWsTURSdvyLu3HXjyoUguHLjQqSC+ANE/EAUu+lGxJ0LQbryA0TBhQhSkIYsAoFS25QUNNqiJU0Tkjffk8zHezPvzfG+mUlMg1643Me7b86cc+8xUIXFU3z3xzCpJiqHzPOykauyxm3g103ArWEx8i8dxK+aSPsuDNM0MfE87Do+lj5+wlfThYZIlYLSSWfm+nh2/wpW1u6iNWhD/2vAGPwwQkb92sUHGNx5XYAbUkoiodCNEtRGJn5HMXjFMJIKgh7ZwRjXHz/B0psNvB0mmhO8OEGYSaSUZ69exqX1d7AhYUxpMyGw4zgIUlkATQHzSvp24OD5QQttqw9Mx6GDyKxtN/Fob5NUmjBsx0boB2j7Ds58fo8d24J+PgXUERBD1uvBGTKMjvuYhGE5uwo4or47GEKKFIaek0boJzFedg9wGIXwCYj5PrxE/CVCHwfVD04shO5VlfpcSNbPRKUipXqYJGAJh5dmc0wUAk53tMAgCIpakKn6ReqleMQk4wJbLsNyo476wEJaMCKnqHwmS8dE0l0cgRNwHMez3gxQMywaxKTpjPD02w9s2h44NTJVLaWQIMC7L8DH+/+UPB+zLds0rh4xDWRKQKVtQrKUFiWzCKJ5iox9r0LJSqA5hjPA7tERfIuhwUKc/tDAluVUxs4Lc0+IZUj11vI5nL9xAbc7Lfg8mQNaYBiSBQQt4Gfo4eHuPlouJ/fnBWBps3LwG+t1XFtdxUpnB2Mh/g84PegFaCCeSwhV2mBejuc5GPaP4THzxCIW4w9OiNXVyQJ4hwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"elk-stack\"\n        title=\"elk-stack\"\n        src=\"/static/640484ec2c0ac5a1f98c579b43eca655/7c811/elk-stack.png\"\n        srcset=\"/static/640484ec2c0ac5a1f98c579b43eca655/103f2/elk-stack.png 165w,\n/static/640484ec2c0ac5a1f98c579b43eca655/748ba/elk-stack.png 330w,\n/static/640484ec2c0ac5a1f98c579b43eca655/7c811/elk-stack.png 660w,\n/static/640484ec2c0ac5a1f98c579b43eca655/d28e0/elk-stack.png 990w,\n/static/640484ec2c0ac5a1f98c579b43eca655/bb51b/elk-stack.png 1320w,\n/static/640484ec2c0ac5a1f98c579b43eca655/1d574/elk-stack.png 1510w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><code class=\"language-text\">ELK Stack</code>은 <code class=\"language-text\">ElasticSearch</code> + <code class=\"language-text\">Logstash</code> + <code class=\"language-text\">Kibana</code>의 로그 분석 프로세스를 지칭한다.</p>\n<p>하지만 이 중 <code class=\"language-text\">Logstash</code>보다 <code class=\"language-text\">fluent-bit</code>이 쿠버네티스 환경에서 최적화 되어있는 시스템 구축 시 많이 사용되기 때문에 <code class=\"language-text\">Fluent-bit</code>를 선택하였다.</p>\n<h3 id=\"efk-stack\" style=\"position:relative;\"><a href=\"#efk-stack\" aria-label=\"efk stack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EFK Stack</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.57575757575757%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB0ElEQVQoz31SyY4TMRDt/z9w4y8ACW58ARIHJG6g0UxCpjvp9JZebHd7fTw7HZLJjCip7FJV+b1anDkX0E0OxmhorWFW9c4BCAghwDmf7EF4yNmk3JTH2xrDUEgac7NpCfi50ajqGodjhbJqaDcQaoZlnvMB1p7BfxUOm/3A+BGHqsaRee3pBEM+S/XeI8tHjedBQfFJS7LdaJJdSofHVmIwZGa1LYm3nUSrQ4rvBoOO+Swaj43EXliSE3Am9MK2m37E0/MBBausmw5iXhBj1seWORLeiqUobfGUl/izL9lNjX6cUp4mRqowthKlHAS+PWyR73bI25rz8MkfvGPLNs3n7Aj4vi3wsNkSNMe0zFgDZ8B4xFKjwziLUc5ksyl4wfCsLqwL8mtu7EAuCxyJo++iGW4kAsQBp83SVlOP4vcnblNCcUkLAQwXFAmMx5uShXXdFzX8IsrwEYPV8YB3Xz+jERKHokDbNlgYWzizmHf/Nn2ba3XhBdP5H/LbRFvpq9/7Fy3dv8tuwRLLevs400FCfPwBoxaoWZHEp43f5t0XczfD8G8JUYZTj/cfvmDkJvuuu5K+AfRfwHiLacIoJtSaVQoBKSXGccQ8z6+Ab+Uvb/2o0Urip6gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"efk-stack\"\n        title=\"efk-stack\"\n        src=\"/static/5c14ae946911c993953bc437f3538268/7c811/efk-stack.png\"\n        srcset=\"/static/5c14ae946911c993953bc437f3538268/103f2/efk-stack.png 165w,\n/static/5c14ae946911c993953bc437f3538268/748ba/efk-stack.png 330w,\n/static/5c14ae946911c993953bc437f3538268/7c811/efk-stack.png 660w,\n/static/5c14ae946911c993953bc437f3538268/d28e0/efk-stack.png 990w,\n/static/5c14ae946911c993953bc437f3538268/bb51b/efk-stack.png 1320w,\n/static/5c14ae946911c993953bc437f3538268/602ac/efk-stack.png 3062w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<ul>\n<li><code class=\"language-text\">Fluent-bit</code> : 로그를 수집해서 <code class=\"language-text\">Elasticsearch</code>로 전달</li>\n<li><code class=\"language-text\">Elasticsearch</code> : <code class=\"language-text\">Fluentd</code>로부터 받은 데이터를 검색 및 분석하여 저장</li>\n<li><code class=\"language-text\">Kibana</code> : <code class=\"language-text\">Elasticsearch</code>의 빠른 검색능력을 통해 데이터 시각화</li>\n</ul>\n<h2 id=\"사내-efk-stack\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EB%82%B4-efk-stack\" aria-label=\"사내 efk stack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사내 EFK Stack</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.36363636363636%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1klEQVQoz22Rz24SURjFh9ouBNSlmmiiJq6qG0x8AR/Cta/h2kXT2MQncOOfuO5KJbErysDciaWhpBbbQhk0QIX5ywBz7zlephU1enOSe7/k++WcnGuUW9PHW8F18iZ5C7gNXAWeKDCJEDaY1BjtIlhIj3thr3a0L5JZbLxQyphh9XMvN4oNIgMaZA7sR8eqV3q3bg2+VBhV4Vn0fykQ9E0Vd4zngGbudoPcOLkgk+V0vEx+C77y1DQ3bd+xlF/RMDwbnsbE/OGaatwxNvQ2cKfxI+tPDSWX5jDz5PfgEIPyh5didGwhhTkVjAQDm/EOQwsTJ3UGVltuLpxlpDaXy254aYau39Tw1hvhti3lVeSoWt0UTl3I/vbAKg47xYl3dAbzRnN0MYWXpMw4zpUodnwdu1wrirBryRT+9NpuCzs8LZVqRffk4wJG4WCY9yd/xQ4PVb/8ds0aHOiGKsr9X+yNdPta28+OkxWZrCwKmzub9ns7SJ11VWlh9nlhni7s5Lywwk4/O1x8FfLgYNySvdKrZ9X+vslIw1X6C1n0tlXcNZrAI6XukwXyAfAQuAc8BSknKmpS1jluMGwg3PtDdURNqJmOTOpVpQj8Vnr0LSWUwr/nbOEn6LEjrywHZeQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ower-stack\"\n        title=\"ower-stack\"\n        src=\"/static/c348a5046b3739f5c48aff0e160f9cba/7c811/ower-stack.png\"\n        srcset=\"/static/c348a5046b3739f5c48aff0e160f9cba/103f2/ower-stack.png 165w,\n/static/c348a5046b3739f5c48aff0e160f9cba/748ba/ower-stack.png 330w,\n/static/c348a5046b3739f5c48aff0e160f9cba/7c811/ower-stack.png 660w,\n/static/c348a5046b3739f5c48aff0e160f9cba/a91f8/ower-stack.png 960w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><code class=\"language-text\">k8s</code>내 파드들의 로그를 수집하는 <code class=\"language-text\">fluent-bit</code>가 노드별로 <code class=\"language-text\">DaemonSet</code>에 존재하고 <code class=\"language-text\">fluent-bit</code>에서 <code class=\"language-text\">AWS Kinesis Datafirehose</code>를 통해 <code class=\"language-text\">AWS OpenSearch</code>의 <code class=\"language-text\">ElasticSearch</code>로 전송하며 <code class=\"language-text\">Kibana</code>를 통해 시각화 하게 구성하였다.</p>\n<h2 id=\"set-a-efk-stack\" style=\"position:relative;\"><a href=\"#set-a-efk-stack\" aria-label=\"set a efk stack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set a EFK Stack</h2>\n<h3 id=\"install-fluent-bit\" style=\"position:relative;\"><a href=\"#install-fluent-bit\" aria-label=\"install fluent bit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Fluent-bit</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">## create k8s namespace</span>\nkubectl create ns logging</code></pre></div>\n<p>먼저 <code class=\"language-text\">loggging</code> 전용 <code class=\"language-text\">namespace</code>를 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">## helm repo add</span>\nhelm repo <span class=\"token function\">add</span> fluent https://fluent.github.io/helm-charts</code></pre></div>\n<p>그 후 <code class=\"language-text\">helm</code>을 통해 <code class=\"language-text\">fluent chart</code>를 다운로드한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">## helm install</span>\nhelm upgrade <span class=\"token parameter variable\">--install</span> fluent-bit fluent/fluent-bit <span class=\"token parameter variable\">-n</span> logging</code></pre></div>\n<p><code class=\"language-text\">k8s cluster</code>에 해당 <code class=\"language-text\">helm repo</code>를 <code class=\"language-text\">logging namespace</code>에 설치합니다.</p>\n<h5 id=\"result\" style=\"position:relative;\"><a href=\"#result\" aria-label=\"result permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Result</h5>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.78787878787879%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1ElEQVQY02MQklH6zyMk9p+Dhx9Mc/IJAbHgfwYGBjgWkJT/zyMs/p+dixeshotf6D87N+9/fnEZMJ9bUBSsh4WN4z9DQPXU/97F3f898tv+B9XN/B/ds+p/dPfK/4E10/8H1c4A075lE/57FnT898hr++9T0vvfPbflP0gfiO2UWv3fp7Tvf2zfmv+xvWv+M9jGFv439I7+bxac+t8hsQxsiH/lZDANMXDaf8eUqv82MQVg7JBc8d8mOv+/a2bDf+uoPDB2SCoH6wmomgLyEcN/amIAEIGFRr9LSyMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"namespace\"\n        title=\"namespace\"\n        src=\"/static/27cf6f9d8259e1fa3cc82c25a2f89d22/8c3ad/pod-namespace.png\"\n        srcset=\"/static/27cf6f9d8259e1fa3cc82c25a2f89d22/103f2/pod-namespace.png 165w,\n/static/27cf6f9d8259e1fa3cc82c25a2f89d22/748ba/pod-namespace.png 330w,\n/static/27cf6f9d8259e1fa3cc82c25a2f89d22/8c3ad/pod-namespace.png 550w\"\n        sizes=\"(max-width: 550px) 100vw, 550px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 id=\"set-aws-kinesis-data-firehose\" style=\"position:relative;\"><a href=\"#set-aws-kinesis-data-firehose\" aria-label=\"set aws kinesis data firehose permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set AWS Kinesis Data Firehose</h3>\n<blockquote>\n<p>AWS Kinesis Data Firehose를 생성하기 전 AWS Opensearch Domain과 백업용 AWS S3 Buckect을 생성해야 한다.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.09090909090909%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVQY02VROXLEMAzz/7+UJ6RIkSpFii0Sr22tbuu2EZK7mcnBGY0gGQIBelqUhnUOcd//rxh/nfc/2HuPEHeEjzeE92d4e8P0Oc8otaLKaqitybnR3nqXe8b1wfnGnXmlIOWCfHlBeH2C1yumnDN6H8glwwaD4zjEwabU3UUIso8xsG6buOrUSGsjOO4Jeu/ogOAJj+qj0QclmB3M1yuMtRQpIpAo17YpOOfvmBouy4JUGm6h4DwGuf0hOI4Ol41gjqXogfeBSBkpJbk3xshcuRzN3VLD2jpsajjPU7gTz4kj5Jqhg5L4LLAsKzQJOIrFwhyZXfEPZD67ZU6gmJtPMnse1Re1zs+m8WC6JgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"aws-kinesis\"\n        title=\"aws-kinesis\"\n        src=\"/static/ac02283a517640d5bbe8188706120d7e/7c811/aws-kinesis.png\"\n        srcset=\"/static/ac02283a517640d5bbe8188706120d7e/103f2/aws-kinesis.png 165w,\n/static/ac02283a517640d5bbe8188706120d7e/748ba/aws-kinesis.png 330w,\n/static/ac02283a517640d5bbe8188706120d7e/7c811/aws-kinesis.png 660w,\n/static/ac02283a517640d5bbe8188706120d7e/d28e0/aws-kinesis.png 990w,\n/static/ac02283a517640d5bbe8188706120d7e/bb51b/aws-kinesis.png 1320w,\n/static/ac02283a517640d5bbe8188706120d7e/80fb9/aws-kinesis.png 3040w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>왼쪽 상단에 전송스트림 생성을 클릭한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.54545454545455%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA70lEQVQoz3VRi27DIBDj/z+wU6dqUrVqL8IjIRAICd4dJVk2rUjW5RzONiAG56C1xpeU0MYgpYQYI2JipDti3GvaOMI0Tb8QQoCQssP5/IzT6QmXywuJG1jbw1hbDfbeWNi+h1K68tyzwTzP1YQr96K65gXLuiLnTE5bmpbskK6mahyLZJ5bfsCiwo0O19s77DCilIKVhCv4m1BaPfY8nGj47+JQgs/txoCZNvEqBBY8Oj9CaQaMKkiccPQor28f+JSK7keh61Q99ia8Pkg4/5OQ94vRe/BL98Owg7lAr+YpfQjTDs+18aMP9T6P4H/f09IhY+HL95YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kinesis-1\"\n        title=\"kinesis-1\"\n        src=\"/static/b9e4ea916993e0be98608e5709a8c832/7c811/kinesis-1.png\"\n        srcset=\"/static/b9e4ea916993e0be98608e5709a8c832/103f2/kinesis-1.png 165w,\n/static/b9e4ea916993e0be98608e5709a8c832/748ba/kinesis-1.png 330w,\n/static/b9e4ea916993e0be98608e5709a8c832/7c811/kinesis-1.png 660w,\n/static/b9e4ea916993e0be98608e5709a8c832/d28e0/kinesis-1.png 990w,\n/static/b9e4ea916993e0be98608e5709a8c832/bb51b/kinesis-1.png 1320w,\n/static/b9e4ea916993e0be98608e5709a8c832/f0faf/kinesis-1.png 1644w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>소스 및 대상을 선택한다.</p>\n<ul>\n<li>소스 : <code class=\"language-text\">Direct PUT</code></li>\n<li>대상 : <code class=\"language-text\">Amazon OpenSearch Service</code></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.87878787878788%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwUlEQVQ4y51Ui26DMAzk/39yZeojFAjhHaDg+RxCKYOqW6STG4dcbZ+dIAxDulwVNbajruvIAtb+C1VdU3A6hfT1faZYGzLGUF031Pe9kP8VNQjB3LatbMqylAOiicZxpMfjIXaNaZqWc/f7ucATXG+KbkqRiu6kVESZyalpWknBkw4M2H4YKM8LMgzsi6IknRnSOhN/A8KidM4k1ZTyAWx0j8WHs7ppJBJgZKBOIMKfISsEYBj4TiJMktTVbFM3iNO2VizOXV2dPVqWhQ2iOOGUI04jF0EQlUMlKKtKopLIeJ9zdC3KMUft4QgtBSDJi0LSwKVtoffWtCF7ITxfLly3VJx7qu5hYHE8yS9CnWXSLkL4ARlSxUV8u0sIUVB4tApEgFoog7feD1vN/nFD9kJ4Z1HQiyIKf+wFAJknQH+5M7dHP45HEUJREPhIPllvRcGUpFpLK0g0ILYuRbSMRFrVEuX68iEhRs73G9oHEyIRM0HnGxp2VvYIC2E3TwTGRh6K+Rnq3kzEUfq4G2QcUczCoLcQRd979DJKwPM5e/pkz/71IKBbAtQHCuMFQcoYLUyNH0HZz2O47FdAZn72kdkPRzB+IRPYSIcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kinesis-2\"\n        title=\"kinesis-2\"\n        src=\"/static/72a105e23c12af891709a5695912cbec/7c811/kinesis-2.png\"\n        srcset=\"/static/72a105e23c12af891709a5695912cbec/103f2/kinesis-2.png 165w,\n/static/72a105e23c12af891709a5695912cbec/748ba/kinesis-2.png 330w,\n/static/72a105e23c12af891709a5695912cbec/7c811/kinesis-2.png 660w,\n/static/72a105e23c12af891709a5695912cbec/d28e0/kinesis-2.png 990w,\n/static/72a105e23c12af891709a5695912cbec/bb51b/kinesis-2.png 1320w,\n/static/72a105e23c12af891709a5695912cbec/4020a/kinesis-2.png 1642w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>미리 생성해둔 <code class=\"language-text\">AWS OpenSearch Domain</code>을 설정하고 특히, <code class=\"language-text\">index</code> 이름을 설정한다.\n해당 <code class=\"language-text\">index</code> 이름과 같은 <code class=\"language-text\">fluent-bit</code>로 부터 수집된 <code class=\"language-text\">pod</code>들의 로그가 수집된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnUlEQVQ4y5VUCW6DMBD0/1/YRJFaNQpJOG1OA4btjCFtRHGVRpqsD7zHzNpKay3n81nSLBfbD9L3PWzv7V+w1kq3A6WNkcPxKKf3T0lyLWVZApUUhRaDPa2Nt8aUfo1znmnbVoZhSWB4grK2k2ly0nWdNE3jD9d1jQz6FXax/dMYGIZRnHO/oDJTy9vpQw6Hg9zvsVRV5R2/8pvn+We8WtV0VuIkk8sl8hF2D20hczCIIhdxnIgBdyMcPgQhP26a9uEmUGTBY+eTIAVN03raVIu/HErHaSZZXgjnBqKUKJ0BFgcbrrBWQJwEZziniHGSgq4aJcNzio17HHv18qKQcRy/yw0hXDIzhBNGYamc0yEjT8gkBGa/F0iRs1fU3OLhcLuvarQIyyWoNG2Sprg52dK4QCjL3Qzp8Ib+owOWXkAgEk5LYbi/58yFHPL+DWsW/ynZhUrecshPdkuciXkdz2FR2Ng5+i+63iSKrpLh1aHKzNpbYJkva4sdfcmBm9L5W8LnK8vzpYXAncbrQluuTc7Xhn3Kb4kGiTwCPuML7aXjpdSOJRcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kinesis-3\"\n        title=\"kinesis-3\"\n        src=\"/static/411a01de054bb6e49347d57d373b6a07/7c811/kinesis-3.png\"\n        srcset=\"/static/411a01de054bb6e49347d57d373b6a07/103f2/kinesis-3.png 165w,\n/static/411a01de054bb6e49347d57d373b6a07/748ba/kinesis-3.png 330w,\n/static/411a01de054bb6e49347d57d373b6a07/7c811/kinesis-3.png 660w,\n/static/411a01de054bb6e49347d57d373b6a07/d28e0/kinesis-3.png 990w,\n/static/411a01de054bb6e49347d57d373b6a07/bb51b/kinesis-3.png 1320w,\n/static/411a01de054bb6e49347d57d373b6a07/f4146/kinesis-3.png 1618w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>미리 생성해둔 백업용 <code class=\"language-text\">AWS S3 Bucket</code>을 설정한다.\n해당 <code class=\"language-text\">AWS S3 Bucket</code>에는 설정해놓은 버퍼와 파일 형태로 <code class=\"language-text\">log</code>들이 수집된다.</p>\n<h3 id=\"set-fluent-bit-configmap\" style=\"position:relative;\"><a href=\"#set-fluent-bit-configmap\" aria-label=\"set fluent bit configmap permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Fluent-bit Configmap</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">apiVersion: v1\ndata:\n  fluent-bit.conf: <span class=\"token operator\">|</span>\n    <span class=\"token punctuation\">[</span>SERVICE<span class=\"token punctuation\">]</span>\n        Parsers_File      parsers.conf\n        HTTP_Server       On\n        HTTP_Listen       <span class=\"token number\">0.0</span>.0.0\n        HTTP_Port         <span class=\"token number\">2020</span>\n\n    <span class=\"token punctuation\">[</span>INPUT<span class=\"token punctuation\">]</span>\n        Name              <span class=\"token function\">tail</span>\n        Path              /var/log/containers/front-end-app-*.log\n        DB                /var/log/flb_kube.db\n        Mem_Buf_Limit     10MB\n        Refresh_Interval  <span class=\"token number\">10</span>\n        Tag               front-end\n        Parser            <span class=\"token function\">docker</span>\n    <span class=\"token punctuation\">[</span>FILTER<span class=\"token punctuation\">]</span>\n        Name              record_modifier\n        Match             front-end\n        Whitelist_key     log\n    <span class=\"token punctuation\">[</span>OUTPUT<span class=\"token punctuation\">]</span>\n        Name              kinesis_firehose\n        Match             front-end\n        region            ap-northeast-2\n        delivery_stream   kinesis-app\n<span class=\"token punctuation\">..</span>.\n\nkind: ConfigMap\nmetadata:\n  creationTimestamp: <span class=\"token string\">\"2022-05-30T05:43:33Z\"</span>\n  labels:\n    k8s-app: fluent-bit\n  name: fluent-bit\n  namespace: logging</code></pre></div>\n<p>위의 내용중 <code class=\"language-text\">[INPUT]</code> , <code class=\"language-text\">[FILTER]</code>, <code class=\"language-text\">[OUTPUT]</code> 에 내용을 수정한다.</p>\n<ul>\n<li><code class=\"language-text\">INPUT</code> : 로그를 수집할 <code class=\"language-text\">app log path</code>를 작성한다.</li>\n<li><code class=\"language-text\">FILTER</code> : 해당 <code class=\"language-text\">INPUT</code> 의 <code class=\"language-text\">Type</code>을 작성한다.</li>\n<li><code class=\"language-text\">OUTPUT</code> : 수집된 로그들을 어느 곳으로 전송할지 설정합니다. (여기서는 <code class=\"language-text\">AWS Kinesis delivery_stram</code>을 작성한다.)</li>\n</ul>\n<h4 id=\"result-1\" style=\"position:relative;\"><a href=\"#result-1\" aria-label=\"result 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Result</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.96969696969697%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1klEQVQoz42SiW6EMAxE+f8fRQkEsYQlzsU0YzYtqtTdIg2E8YvtHMPsHMZxhJ0srLWIMaLWilKKKuWMEIIy1LIsMMZgmqcWS8qQ5zwRwbA/dzz8jpCKSjJVXyrI5Uq+bRv8M6j/w9ZvlZY0pYSBL1Y4z/NPkcmt03dM5wa2+gnmsiXKvwprQi6JD83+vY+ZkNzd+83VvuT8gqNcHXBj6bEIvbN5/KcY4yTGeFC1FuRbMU14SIRxazs9h6NBfQs0oXZ/Vd4OgZkd1nVteoC3w3uvTC/C8RdMwSUy/b9ZsgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"check-result\"\n        title=\"check-result\"\n        src=\"/static/25b2575fbec916ef6f8e088449d9659f/7c811/check-result.png\"\n        srcset=\"/static/25b2575fbec916ef6f8e088449d9659f/103f2/check-result.png 165w,\n/static/25b2575fbec916ef6f8e088449d9659f/748ba/check-result.png 330w,\n/static/25b2575fbec916ef6f8e088449d9659f/7c811/check-result.png 660w,\n/static/25b2575fbec916ef6f8e088449d9659f/d28e0/check-result.png 990w,\n/static/25b2575fbec916ef6f8e088449d9659f/bb51b/check-result.png 1320w,\n/static/25b2575fbec916ef6f8e088449d9659f/725bf/check-result.png 1998w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>이제 AWS Kinesis로 접속하여 해당 DataFirehose에서 모니터링 탭에서 확인해보면 위의 사진 처럼 성공 그래프가 찍히는걸 볼 수 있다.</p>\n<h2 id=\"finish\" style=\"position:relative;\"><a href=\"#finish\" aria-label=\"finish permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Finish</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.93939393939393%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVQoz62S207DMAyG8/DAxhDcIMHbccUFh61N0jTn9McOzdR1A3FBJat1bH/+7VQ8Pj3j6maH680dtrsHbG/v/2ybC77APz9CGYdhdLDOY7SBzMP7iBAiPJnzgfwwv+k8JvRSQWmDbqAaF07yxNteotcjYsxwIRE4wFpbgyklTNNUjb+dc3Tua9yMtjZnITmXY5742PcVFFOh7rl2U1qj7yUVuppUCgMztB5w6HoMg6lxzpOkNpLqUvMKxMvrOz61x8EEdCNLj7WQx3LUvayADKpAirMvlT4FdsqQwgwbcn2zwiWwjZLzAmhMVca+YuC8GoYKvhAet1kDcoHzK+Dw3ehXYKKFhnl/SyAraQo5Mc0Ku04ed3g+MgEbKK6AcrnD6cIOfwK2UcMloD9XuL4UNQPb3/AFTqhAbBv71rQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"finish\"\n        title=\"finish\"\n        src=\"/static/54868a51b7225d80c95e7d823fb2f234/7c811/finish.png\"\n        srcset=\"/static/54868a51b7225d80c95e7d823fb2f234/103f2/finish.png 165w,\n/static/54868a51b7225d80c95e7d823fb2f234/748ba/finish.png 330w,\n/static/54868a51b7225d80c95e7d823fb2f234/7c811/finish.png 660w,\n/static/54868a51b7225d80c95e7d823fb2f234/d28e0/finish.png 990w,\n/static/54868a51b7225d80c95e7d823fb2f234/bb51b/finish.png 1320w,\n/static/54868a51b7225d80c95e7d823fb2f234/80fb9/finish.png 3040w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>위의 과정을 모두 마쳤으면 <code class=\"language-text\">AWS OpenSearch Domain</code>으로 접속하여 <code class=\"language-text\">kibana</code>를 보자.</p>\n<blockquote>\n<p><code class=\"language-text\">Index patterns</code> 설정을 먼저 하고 <code class=\"language-text\">kibana</code>의 <code class=\"language-text\">Discover</code> 메뉴에 접속하면 정상적으로 로그가 쌓이는 것을 확인할 수 있다.</p>\n</blockquote>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://nsxbaas.blog/2022/09/27/visualising-antrea-ids-logs/\">https://nsxbaas.blog/2022/09/27/visualising-antrea-ids-logs/</a></li>\n</ul>","timeToRead":3,"excerpt":"Overview…","frontmatter":{"title":" 🔍 AWS OpenSearch를 활용해 EFK Stack 구축하기","date":"2023-04-21 14:30","categories":["Devops","AWS","EFKStack"],"tags":["Devops","AWS","AWS OpenSearch","EFKStack"],"description":null,"keywords":"devops","cover":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACBElEQVQoz3VS247SUBTl4/wF3/2D+QB9cB58NtFHjTEx0ZioD3VCwrUKIUwCDJDhItBWpoq0Fej19LSlh2V7Cg44cSXn7MvZe3d1751DArbbgbEddok8wPa3oCHjOiUxOuIKuupzO407HG4f5eaOi6SIGUNMKerKAqK8TD+Hb30dZ/cuIbyUE3vLCxxwnJ/quVTRrRiKtuVOz/MQxzHcgCKKM59jhsi/VvF96CKMfERRjIg4iIKMsbuOERLcMnwm2Hj4xsJQ0mGZK7AwRF3+BVHSUs6YDQw8ut9B4e084UuxMDa4fHGOm3eP4dEQz8/GaH6ys4Lp9eWa4kODwA+2IJ6bsQp9OEGQ9XMd4f1TGZOOnfQ7TOIiWMo16KzJ33t1AwvJvy247wC/g4Rd6BO05iu01Q3338xMPHnQg/jxB7aMJi1hfzPu9DCbFu5g4ZqYW9lvaD9dvDqfoPv1N/4Hth9ULjMYHMeBYRgwTROWbSPwyX5IJGFND2kghPA4TdO41HUd6/X6dMppUKlUgiAI6Ha7GAwG+HxxgWKxiGaziWq1ikKhiKvOFXq9HsrlMvL5PPeLoshzTgru+GIzvi6NRoMH9vt9tFotjEYjrk8mE34qlQpqtRqGwyFn9+8+5o43PsV4PIYsy1BVFdPplLNtt9tYLpfYbDZQFAWSJHHdtu2TYqn8A6/ZN8qCScJBAAAAAElFTkSuQmCC","width":660,"height":374,"src":"/static/4fe87af4fa931ad21663c85a6d557ba1/4e34f/cover.png","srcSet":"/static/4fe87af4fa931ad21663c85a6d557ba1/4e34f/cover.png 1x,\n/static/4fe87af4fa931ad21663c85a6d557ba1/6de51/cover.png 1.5x,\n/static/4fe87af4fa931ad21663c85a6d557ba1/5b479/cover.png 2x"}}}},"fields":{"slug":"/aws-opensearch-efk-stack","date":"2023-04-21T05:30:00.000Z"}}},"pageContext":{"slug":"/aws-opensearch-efk-stack","nexttitle":" ⬆️ AWS EC2 Storage 용량 늘리기(scale-up)","nextslug":"/storage-scale-up","prevtitle":"Managing Kubernetes - 01.쿠버네티스란?","prevslug":"/managing-kubernetes-01","tagList":["Devops","Kubernetes","AWS","AWS EKS","AWS EC2","AWS OpenSearch","EFKStack","EC2","ArgoCD","Slack","kubernetes","metric","K8s","Storage","EKS","Linux","Ubuntu","Gitlab","Jenkins","config","terminal","iterms","git","github","develop","Java","Spring","cron","React.js","Redux.js","Javascript","DB","DataBase","MySQL","vue","spring","mysql","jsp","db"],"categoryList":["Devops","Kubernetes","AWS","AWS EKS","AWS EC2","EFKStack","EC2","ArgoCD","Slack","kubernetes","metric","Storage","Linux","Ubuntu","config","git","Java","React.js","DataBase","develop"],"latestPostEdges":[{"node":{"fields":{"slug":"/aws-eks-ng"},"frontmatter":{"template":"post","title":"좌충우돌 AWS EKS Nodegroup 전환기","tags":["Devops","Kubernetes","AWS","AWS EKS","AWS EC2"],"categories":["Devops","Kubernetes","AWS","AWS EKS","AWS EC2"],"date":"2023-08-15 13:00"}}},{"node":{"fields":{"slug":"/kubernetes-service"},"frontmatter":{"template":"post","title":"쿠버네티스 service란?!","tags":["Devops","Kubernetes"],"categories":["Devops","Kubernetes"],"date":"2023-08-03 11:40"}}},{"node":{"fields":{"slug":"/kubernetes-pod-update"},"frontmatter":{"template":"post","title":"쿠버네티스 update에 관해","tags":["Devops","Kubernetes"],"categories":["Devops","Kubernetes"],"date":"2023-07-19 15:00"}}},{"node":{"fields":{"slug":"/kubernetes-delete-process"},"frontmatter":{"template":"post","title":"쿠버네티스는 Node에 Resource가 부족할 때 어떤 순서로 pod를 없앨까?!","tags":["Devops","Kubernetes"],"categories":["Devops","Kubernetes"],"date":"2023-07-13 10:30"}}}]}},"staticQueryHashes":[]}