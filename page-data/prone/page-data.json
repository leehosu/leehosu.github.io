{"componentChunkName":"component---src-templates-post-template-jsx","path":"/prone","result":{"data":{"markdownRemark":{"html":"<h1 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h1>\n<p>처음 kubenetes로 container 운영 환경을 구성하였을 때, 애플리케이션 컨테이너가 생성되지도 않았는데 kube-scheduelr가 scheduling을 하고, ingress에선 해당 파드로 트래픽을 보내는데 아직 생성되지 않아 500 ERROR 발생하기도 하고.. pod가 unhealth 상태인데 kubenetes에선 그 상태를 감지하지 못해 계속 트래픽을 분산하기도 하고.. 아주 곤욕스러웠습니다. 그러던 중 kubernetes에서도 health check를 할 수 있는 Probe가 존재한다는 것을 알게되었고 바로 도입하였습니다. </p>\n<p>나아가 kubernetes pod probe는 오픈소스인 <a href=\"https://botkube.io/\">botkube</a>를 통해 효율을 극대화 할 수 있습니다. 이번 포스팅에서는 kubernetes의 probe에 대해 다뤄보고 추후에 botkube에 대해 포스팅하도록 할게요!</p>\n<h1 id=\"probe란\" style=\"position:relative;\"><a href=\"#probe%EB%9E%80\" aria-label=\"probe란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Probe란?</h1>\n<ul>\n<li>kubenetes는 kubelet을 통해 pod의 상태를 파악하는 Probe(조사) 기능을 제공합니다.</li>\n<li>컨테이너의 상태를 파악하고 라이프 사이클을 제어하는 health-check기능을 수행합니다.</li>\n<li>진단을 수행하기 위해서, kubelet은 컨테이너 안에서 코드를 실행하거나, 또는 네트워크 요청을 전송합니다.</li>\n</ul>\n<h1 id=\"종류\" style=\"position:relative;\"><a href=\"#%EC%A2%85%EB%A5%98\" aria-label=\"종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>종류</h1>\n<h2 id=\"readnessprobe준비성-조사\" style=\"position:relative;\"><a href=\"#readnessprobe%EC%A4%80%EB%B9%84%EC%84%B1-%EC%A1%B0%EC%82%AC\" aria-label=\"readnessprobe준비성 조사 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ReadnessProbe(준비성 조사)</h2>\n<ul>\n<li>컨테이너가 요청(트래픽)을 처리할 준비가 되었는지 여부를 나타냅니다.</li>\n<li>준비성 프로브가 실패한다면 엔드포인트 컨트롤러는 파드에 연관된 모든 서비스들의 엔드포인트에서 파드의 IP 주소를 제거합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>동작 원리<span class=\"token punctuation\">]</span>\n- 문제가 발생한 컨테이너는 일시적으로 어떠한 요청도 처리하지 않는 상태가 된다.\n- 해당 probe가 성공하게 되면 Pod는 해당 Pod의 Service가 생성되는 시점에 \nkube-proxy 에 의해 iptable에 등록되면서 서비스 백엔드에 등록된다.\n- 서비스 백엔드에 등록된 pod들은 <span class=\"token variable\"><span class=\"token variable\">`</span>chain rule<span class=\"token variable\">`</span></span> 에 의해 \n해당 서비스로 들어온 트래픽을 분배하고 이를 처리하게 된다.\n\n→ 서비스 백엔드에서 제외되면 해당 pod는 어떠한 요청도 처리하지 않는 상태가 된다.</code></pre></div>\n<h2 id=\"livenessprobe활성-조사\" style=\"position:relative;\"><a href=\"#livenessprobe%ED%99%9C%EC%84%B1-%EC%A1%B0%EC%82%AC\" aria-label=\"livenessprobe활성 조사 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LivenessProbe(활성 조사)</h2>\n<ul>\n<li>컨테이너가 동작 중인지 여부를 나타냅니다.</li>\n<li>활성프로브에 실패한다면 kubelet은 컨테이너를 죽이고 해당 컨테이너는 재시작 정책의 대상이 됩니다.</li>\n</ul>\n<h2 id=\"startupprobe시작-조사\" style=\"position:relative;\"><a href=\"#startupprobe%EC%8B%9C%EC%9E%91-%EC%A1%B0%EC%82%AC\" aria-label=\"startupprobe시작 조사 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>StartupProbe(시작 조사)</h2>\n<ul>\n<li>컨테이너 내의 애플리케이션이 시작 되었는지를 나타냅니다.</li>\n<li>스타트업 프로브가 주어진 경우, 성공할 때 까지 다른 나머지 프로브는 활성화 되지 않습니다.</li>\n<li>스타트업 프로브가 실패하면 kubelet이 컨테이너를 죽이고 컨테이너는 재시작 정책에 따라 처리됩니다.</li>\n</ul>\n<h1 id=\"옵션\" style=\"position:relative;\"><a href=\"#%EC%98%B5%EC%85%98\" aria-label=\"옵션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>옵션</h1>\n<h2 id=\"health-check\" style=\"position:relative;\"><a href=\"#health-check\" aria-label=\"health check permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>health-check</h2>\n<h3 id=\"execaction\" style=\"position:relative;\"><a href=\"#execaction\" aria-label=\"execaction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ExecAction</h3>\n<ul>\n<li>컨테이너에서 지정된 명령어를 실행</li>\n<li>명령어를 실행한 후, <code class=\"language-text\">exit code</code> 가 0이면 성공, 이외의 값은 실패로 분류</li>\n</ul>\n<h3 id=\"tcpsocketaction\" style=\"position:relative;\"><a href=\"#tcpsocketaction\" aria-label=\"tcpsocketaction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TCPSocketAction</h3>\n<ul>\n<li>지정된 포트로 TCP 소켓 연결을 시도</li>\n<li>연결이 정상적으로 이루어지는 경우 성공, 연결에 실패한 경우 실패로 분류</li>\n</ul>\n<h3 id=\"httpgetaction\" style=\"position:relative;\"><a href=\"#httpgetaction\" aria-label=\"httpgetaction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HttpGetAction</h3>\n<ul>\n<li>지정된 포트와 주소로 HTTP GET 요청을 전송</li>\n<li>응답 상태가 200~400 구간에 속하는 경우 성공, 이외에는 실패로 분류</li>\n</ul>\n<h2 id=\"health-check-parameter\" style=\"position:relative;\"><a href=\"#health-check-parameter\" aria-label=\"health check parameter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>health-check parameter</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.72727272727273%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0UlEQVQY021R2Y4EIQj0/z/VPlQaBK92y+lkMrO79UAqhVCA7v7AnPOJpZQxBnittbUGBREilN47RGQhuvsbq7KWfdtrWWUhBBaBDpKIoBBwXU/H38Wrd+uklJsW2IpMZsxgqjMlmC7CfLcGH4cemEFEvPdmhmJV3eOec5as13lmIislxZhDyKog3fu5bTezww7jG2h3hAOLwTmdZzXDAjFGY0bqIqrM4MNsFf8FHsE/i7TeYYspQHAwDLiy4K9LuvEf8ALz4zTPIo/yTq2PeJEfvkCZe/JLXoYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"probe-option.png\"\n        title=\"probe-option.png\"\n        src=\"/static/eaff89a63c2f89cbcf528b7fdecd9786/7c811/probe-option.png\"\n        srcset=\"/static/eaff89a63c2f89cbcf528b7fdecd9786/103f2/probe-option.png 165w,\n/static/eaff89a63c2f89cbcf528b7fdecd9786/748ba/probe-option.png 330w,\n/static/eaff89a63c2f89cbcf528b7fdecd9786/7c811/probe-option.png 660w,\n/static/eaff89a63c2f89cbcf528b7fdecd9786/d28e0/probe-option.png 990w,\n/static/eaff89a63c2f89cbcf528b7fdecd9786/42a19/probe-option.png 1024w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 id=\"initialdelayseconds\" style=\"position:relative;\"><a href=\"#initialdelayseconds\" aria-label=\"initialdelayseconds permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>initialDelaySeconds</h3>\n<ul>\n<li>기본 옵션</li>\n<li>시작하기전에 기다리는 시간을 설정</li>\n<li>기본 값 : 0초</li>\n</ul>\n<h3 id=\"periodseconds\" style=\"position:relative;\"><a href=\"#periodseconds\" aria-label=\"periodseconds permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>periodSeconds</h3>\n<ul>\n<li>추가 설정 옵션</li>\n<li>검사 빈도를 결정</li>\n<li>기본 값 : 10초</li>\n</ul>\n<h3 id=\"timeoutseconds\" style=\"position:relative;\"><a href=\"#timeoutseconds\" aria-label=\"timeoutseconds permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>timeoutSeconds</h3>\n<ul>\n<li>기본 옵션</li>\n<li>얼마나 기다려야 하는지를 결정</li>\n<li>기본 값 : 1초</li>\n</ul>\n<h3 id=\"successthreshold\" style=\"position:relative;\"><a href=\"#successthreshold\" aria-label=\"successthreshold permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>successThreshold</h3>\n<ul>\n<li>추가 옵션</li>\n<li>시도가 실행한 후 성공한 것으로 간주할 최소 연속 성공 횟수를 지정</li>\n<li>기본 값 : 1회</li>\n</ul>\n<h3 id=\"failurethreshod\" style=\"position:relative;\"><a href=\"#failurethreshod\" aria-label=\"failurethreshod permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>failureThreshod</h3>\n<ul>\n<li>추가 옵션</li>\n<li>시도가 실행한 후 실패한 것으로 간주할 최소 연속 실패 횟수를 지정</li>\n<li>기본 값 : 3회</li>\n</ul>\n<h3 id=\"example\" style=\"position:relative;\"><a href=\"#example\" aria-label=\"example permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>example</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">failureThreshold: <span class=\"token number\">1</span>\ninitialDelaySeconds: <span class=\"token number\">3</span>\nperiodSeconds: <span class=\"token number\">3</span>\nsuccessThreshold: <span class=\"token number\">1</span>\ntimeoutSeconds: <span class=\"token number\">3</span>\nterminationGracePeriodSeconds: <span class=\"token number\">5</span></code></pre></div>\n<p>최초 3초 기다리고 (<code class=\"language-text\">timeoutSeconds : 3</code>) </p>\n<p>3초 후에 첫 헬스 체크를 하고 (<code class=\"language-text\">initialDelaySeconds : 3</code>)</p>\n<p>3초 마다 체크하며 (<code class=\"language-text\">periodSeconds : 3</code>)</p>\n<p>수행 실패가 1번 이상이면 실패로 판단한다. (<code class=\"language-text\">failureThreshold : 1</code>)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">failureThreshold: <span class=\"token number\">10</span>\ninitialDelaySeconds: <span class=\"token number\">3</span>\nperiodSeconds: <span class=\"token number\">5</span>\nsuccessThreshold: <span class=\"token number\">5</span>\ntimeoutSeconds: <span class=\"token number\">1</span></code></pre></div>\n<p>최초 1초 기다리고  (<code class=\"language-text\">timeoutSeconds : 3</code>) </p>\n<p>3초 후에 첫 헬스 체크를 하고 (<code class=\"language-text\">initialDelaySeconds : 3</code>)</p>\n<p>5초마다 헬스 체크를 하며 (<code class=\"language-text\">periodSeconds : 5</code>)</p>\n<p>수행 실패가 10번 이상이면 실패로 판단한다.  (<code class=\"language-text\">failureThreshold : 1</code>)</p>\n<h1 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h1>\n<ul>\n<li><a href=\"https://medium.com/finda-tech/kubernetes-pod%EC%9D%98-%EC%A7%84%EB%8B%A8%EC%9D%84-%EB%8B%B4%EB%8B%B9%ED%95%98%EB%8A%94-%EC%84%9C%EB%B9%84%EC%8A%A4-probe-7872cec9e568\">https://medium.com/finda-tech/kubernetes-pod의-진단을-담당하는-서비스-probe-7872cec9e568</a></li>\n<li><a href=\"https://velog.io/@koo8624/Kubernetes-Probes\">https://velog.io/@koo8624/Kubernetes-Probes</a></li>\n<li><a href=\"https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/\">https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/</a></li>\n</ul>","timeToRead":4,"excerpt":"들어가며 처음 kubenetes로 container 운영 환경을 구성하였을 때, 애플리케이션 컨테이너가 생성되지도 않았는데 kube-scheduelr가 scheduling을 하고, ingress…","frontmatter":{"title":"kubernetes Pod의 상태를 진단하는 Probes","date":"2023-07-01 15:40","categories":["Devops","Kubernetes"],"tags":["Devops","Kubernetes"],"description":null,"keywords":"devops","cover":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTUlEQVQoz5VS20rDQBDNF/o7Porf4LtvfoAhfShioTQJKO2DUKFKtEUQkmoaU2s3e8txZ2tD2jQFJwyb2Zkze+biwEhZltieu9r07cfV8STO9qe6rDl1LSmpriVp4OoJ7WUFBFhRQEqJNsnzHKvVClmWNdg79VeIAYPGy3SG5TLD9T3D2dUC81zh9WOJm+d3G5ckCRhjiOP4cMkVQ/NN5xwLLsFKjdPLFCfnCYInjrtoigvPhzDxWZoiDEOMx+MjDMsNw1ks8PhlypECb4nE7cOP7eu3VPgslAVFUQTf9zGZTKC13mHpHGtwmyilrB7COfuUlXlxC1BKgwtpBrSxhRC2dzSwttVpJKTJdbtduK6LIAjQ6/VseZ1OB6PRCIPBAP1+H57nYTgcbob5V/bBPSQnsViv1yjM+pByzq1NzMhPTMmm+9bF/k8Pj2F+AUQ8VTYGippkAAAAAElFTkSuQmCC","width":660,"height":359,"src":"/static/ee181c3ab643e4286f76bc16d834f08d/4e34f/cover.png","srcSet":"/static/ee181c3ab643e4286f76bc16d834f08d/4e34f/cover.png 1x,\n/static/ee181c3ab643e4286f76bc16d834f08d/6de51/cover.png 1.5x,\n/static/ee181c3ab643e4286f76bc16d834f08d/5b479/cover.png 2x"}}}},"fields":{"slug":"/prone","date":"2023-07-01T06:40:00.000Z"}}},"pageContext":{"slug":"/prone","nexttitle":"Managing Kubernetes - 03.아키텍처","nextslug":"/managing-kubernetes-03","prevtitle":"쿠버네티스는 pod를 어떻게 삭제할까??","prevslug":"/kubernetes-delete-pod","tagList":["Devops","kubernetes","k8s","pod","review","Kubernetes","promehtues","loki","grafana","Observability","AWS","AWS EKS","AWS EC2","AWS OpenSearch","EFKStack","EC2","ArgoCD","Slack","metric","K8s","Storage","EKS","Linux","Ubuntu","Gitlab","Jenkins","config","terminal","iterms","git","github","develop","Java","Spring","cron","React.js","Redux.js","Javascript","DB","DataBase","MySQL","vue","spring","mysql","jsp","db"],"categoryList":["Devops","kubernetes","k8s","pod","review","Kubernetes","promehtues","loki","grafana","Observability","AWS","AWS EKS","AWS EC2","EFKStack","EC2","ArgoCD","Slack","metric","Storage","Linux","Ubuntu","config","git","Java","React.js","DataBase","develop"],"latestPostEdges":[{"node":{"fields":{"slug":"/k8s-pod-lifecycle"},"frontmatter":{"template":"post","title":"쿠버네티스에서 pod의 생애주기","tags":["Devops","kubernetes","k8s","pod"],"categories":["Devops","kubernetes","k8s","pod"],"date":"2024-01-03 13:50"}}},{"node":{"fields":{"slug":"/2023-review"},"frontmatter":{"template":"post","title":"2023년 회고","tags":["Devops","review"],"categories":["Devops","review"],"date":"2023-12-30 13:00"}}},{"node":{"fields":{"slug":"/kubernetes-apply-pod"},"frontmatter":{"template":"post","title":"KUBERNETES에서 POD가 생성되고 업데이트 되는 과정","tags":["Devops","Kubernetes"],"categories":["Devops","Kubernetes"],"date":"2023-09-13 10:00"}}},{"node":{"fields":{"slug":"/kube-prometheus-stack"},"frontmatter":{"template":"post","title":"kube-prometheus-stack으로 모니터링 시스템 구축하기","tags":["Devops","Kubernetes","promehtues","loki","grafana","Observability"],"categories":["Devops","Kubernetes","promehtues","loki","grafana","Observability"],"date":"2023-08-27 15:40"}}}]}},"staticQueryHashes":[]}